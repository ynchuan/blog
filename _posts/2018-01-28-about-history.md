---
layout: post
title: 关于history的观察记录
category: js
author: ynchuan
---
# 关于history的观察记录

- 自定义名词：窗口源，每个路由页面在打开时候存在一个属性记录路由的切换方式，分为两类：加载切换和不加载切换，改属性标识为窗口源

- history通过pushState操作历史记录，该类历史记录会记录成相同的窗口源，对于源相同的页面不会发出网络请求，只是路由变更。通过location变更页面，会记录成不同窗口源，不同窗口源页面会发出网络请求。对于两个不同窗口源的页面，例如通过历史回退操作，会通过判断源是否跳动来发出网络请求，也是单页应用路由的实现原理。

- 也只有窗口源相同的页面才会触发浏览器popstate时间。

- history.back只是控制路由栈的变化，至于页面网络加载否，通过窗口源判断

